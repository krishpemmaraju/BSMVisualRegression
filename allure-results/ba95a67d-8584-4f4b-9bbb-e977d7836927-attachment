# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Validate Product Details page
- Location: C:\Automation\AutomationNewSVN\AutoMisc\visualregression\tests\OrderCaptureTestsVisualRegression_NewUI.spec.ts:175:5

# Error details

```
Error: locator.click: Error: strict mode violation: locator('button[aria-label=\'Back\']') resolved to 2 elements:
    1) <button tabindex="0" aria-label="Back" aria-describedby="_q2dfs60geuc" class="BaseButtonStyles_styles_base__jvi3ds0 BaseButtonStyles_styles_sizes_sm__jvi3ds29 BaseButtonStyles_styles_variants_borderless_base__jvi3ds17 BaseButtonStyles_styles_styled__jvi3ds1 BaseButtonStyles_styles_min__jvi3ds3 BaseButtonStyles_styles_variants_borderless_pseudohover__jvi3ds1e">…</button> aka getByLabel('Order Capture').getByLabel('Back')
    2) <button tabindex="0" aria-label="Back" class="BaseButtonStyles_styles_base__jvi3ds0 BaseButtonStyles_styles_sizes_md__jvi3ds2a BaseButtonStyles_styles_variants_borderless_base__jvi3ds17 BaseButtonStyles_styles_styled__jvi3ds1 BaseButtonStyles_styles_min__jvi3ds3 BaseButtonStyles_styles_variants_borderless_pseudohover__jvi3ds1e">…</button> aka locator('#btnBack').getByLabel('Back')

Call log:
  - waiting for locator('button[aria-label=\'Back\']')

    at C:\Automation\AutomationNewSVN\AutoMisc\visualregression\tests\OrderCaptureTestsVisualRegression_NewUI.spec.ts:187:53
```

# Test source

```ts
   87 |   await customerContentSlotSelection.click()
   88 |   await expect(searchInputAvailableAfterClickCustomer).toHaveScreenshot(["OrderCapture/CustomerContentSlot", "CustomerDetailsPanel.png"])
   89 |   await expect(getTextOfCustomerDetailsSection).toHaveText('Customer Details');
   90 |   await expect(isCustomerSelectCustomerAccountAvailable).toBeVisible();
   91 |
   92 |   await expect(clickOnCustomerDrpDwn).toBeVisible();
   93 |   await clickOnCustomerDrpDwn.click();
   94 |     await expect(customerSearchInputAvailable).toBeVisible({timeout:10000});
   95 |   await expect(customerSearchInputAvailable).toBeEnabled();
   96 |   await customerSearchInputAvailable.fill('SMITH AND BYFORD LTD')
   97 |   await expect(customerSearchResultsAvailable).toBeVisible({timeout: 20000});
   98 |   await selectCustomerListed.click();
   99 |   await expect(clickOnSaveOnSelectCusomter).toBeEnabled({timeout: 6000});
  100 |   await clickOnSaveOnSelectCusomter.click();
  101 |   await expect(isSelectedCustomerVisible).toBeVisible();
  102 | })
  103 |
  104 | test("Validate Account Status Section", async () => {
  105 |     const isAccountStatusVisible = page.locator("oj-sp-scoreboard-metric-card[card-title='Account Status']");
  106 |     const isAccountStatusPanelAvailable = page.locator("oj-sp-general-drawer-template[drawer-title='Account Status']");
  107 |     const isAccoutnStatusHeadingAvailable = page.locator("div[title='Account Status']")
  108 |
  109 |
  110 |     await expect(isAccountStatusVisible).toBeVisible();
  111 |     await isAccountStatusVisible.click();
  112 |     await expect(isAccountStatusPanelAvailable).toBeVisible();
  113 |     await expect(isAccoutnStatusHeadingAvailable).toHaveText('Account Status');
  114 |     await page.locator("button[aria-label='Close']").scrollIntoViewIfNeeded();
  115 |     await page.locator("button[aria-label='Close']").click({force: true});
  116 | })
  117 |
  118 | test("Validate Available Balance Section", async() => {
  119 |     const isAvailableBalanceVisible = page.locator("oj-sp-scoreboard-metric-card[card-title='Available Balance']");
  120 |     const isAvailableBalancePanelAvailable = page.locator("oj-sp-general-drawer-template[drawer-title='Transaction History']");
  121 |     const isAvailableBalanceHeadingAvailable = page.locator("div[title='Transaction History']")
  122 |     const closeBtn = page.locator("button[aria-label='Close']")
  123 |
  124 |     await expect(isAvailableBalanceVisible).toBeVisible();
  125 |     await isAvailableBalanceVisible.click()
  126 |     await expect(isAvailableBalancePanelAvailable).toBeVisible();
  127 |     await expect(isAvailableBalanceHeadingAvailable).toHaveText('Transaction History')
  128 |     await closeBtn.scrollIntoViewIfNeeded();
  129 |     await closeBtn.click({force: true});
  130 | })
  131 |
  132 | test("Validate Required Section", async() => {
  133 |         const isRequiredVisible = page.locator("oj-sp-scoreboard-metric-card[card-title='Required']");
  134 |         
  135 |         await expect(isRequiredVisible).toBeVisible();
  136 | })
  137 |
  138 |
  139 | test("Validate Customer PO section info Slot", async () => {
  140 |   const customerPOTextAvailable = page.locator("span[title='Customer PO #']");
  141 |   const customerPOContentSlotSelection = page.locator("oj-sp-scoreboard-metric-card[card-title='Customer PO #']");
  142 |   const customerPOPanelAvailable =  page.locator("oj-sp-general-drawer-template[drawer-title='Order Details']");
  143 |   const isCustomerPOHeadingAvailable = page.locator("div[title='Order Details']")
  144 |   const customerOrderInputTextAvailable = page.getByLabel("Customer Order Number")
  145 |   const isCustomerOrderNumberTextBoxAvailable = page.locator("oj-c-input-text[label-hint='Customer Order Number'] input");
  146 |   const isCancelBtnAvailableUnderCustPOSection = page.getByRole('button', {name:'Cancel'})
  147 |   const isContinueBtnAvailableUnderCustPOSection = page.getByRole('button', {name:'Continue'})
  148 |   const closeBtn = page.locator("button[aria-label='Close']")
  149 |
  150 |   await expect(customerPOTextAvailable).toHaveText("Customer PO #")
  151 |   await expect(customerPOContentSlotSelection).toBeEnabled();
  152 |   await expect(customerPOContentSlotSelection).toHaveScreenshot(["OrderCapture/CustomerPOContentSlot", "CustomerPOContentSlotClickable.png"])
  153 |   await customerPOContentSlotSelection.click();
  154 |   await expect(customerPOPanelAvailable).toBeVisible()
  155 |   expect(await isCustomerPOHeadingAvailable.textContent()).toContain("Order Details")
  156 |   await expect(customerOrderInputTextAvailable).toBeVisible();
  157 |   await expect(isCustomerOrderNumberTextBoxAvailable).toBeVisible();
  158 |   await expect(isCustomerOrderNumberTextBoxAvailable).toBeEnabled();
  159 |   await expect(isCancelBtnAvailableUnderCustPOSection).toBeVisible();
  160 |   await expect(isCancelBtnAvailableUnderCustPOSection).toBeEnabled();
  161 |   await expect(isContinueBtnAvailableUnderCustPOSection).toBeVisible();
  162 |   await expect(isContinueBtnAvailableUnderCustPOSection).toBeEnabled();
  163 |   await closeBtn.scrollIntoViewIfNeeded();
  164 |   await closeBtn.click({force: true});
  165 |
  166 | })
  167 |
  168 | test.skip("Validate Loyalty Program Section", async() => {
  169 |     const isLoyaltyProgramTextVisible = page.locator("oj-sp-scoreboard-metric-card[card-title='Loyalty Program']");
  170 |     await expect(isLoyaltyProgramTextVisible).toBeVisible();
  171 | })
  172 |
  173 |
  174 |
  175 | test("Validate Product Details page", async()=> {
  176 |     await page.locator("input[aria-label='Product Search']").waitFor({timeout: 6000});
  177 |     await page.locator("input[aria-label='Product Search']").fill("219500")
  178 |     await page.locator("#searchInputContainer_tbProductSearch").click()
  179 |     await page.locator("wol-product-card[id*='219500']").click();
  180 |     const getQuantityLabel = page.getByLabel("Quantity");
  181 |     const addBtnOnProdDetailsPage = page.getByRole('button',{name:'Add to Basket'});
  182 |     const productDetailsText = page.locator("div.oj-flex.oj-sm-flex-direction-column   div.oj-typography-body-md.oj-flex-item.oj-sm-flex-initial");
  183 |     const getAlternateProductLink = page.locator("div.oj-collapsible-header-wrapper").nth(0);
  184 |     const getRelatedProducts = page.locator("div.oj-collapsible-header-wrapper").nth(1);
  185 |     await expect(getAlternateProductLink).toHaveText("Alternate Products");
  186 |     await expect(getRelatedProducts).toHaveText("Related Products");
> 187 |     await page.locator("button[aria-label='Back']").click()
      |                                                     ^ Error: locator.click: Error: strict mode violation: locator('button[aria-label=\'Back\']') resolved to 2 elements:
  188 | })
  189 |
  190 |
  191 |
  192 | test("Validate Add button on Product Search Page section", async () => {
  193 |     // await page.locator("input[aria-label='Product Search']").waitFor({timeout:5000})
  194 |     // await page.locator("input[aria-label='Product Search']").fill('');
  195 |     // await page.locator("input[aria-label='Product Search']").fill("D53216")
  196 |     const isAtpDateVisible = page.locator('span.oj-flex-item.oj-badge.custom-badge-atp');
  197 |     const isAvailableStockVisible = page.locator('span.oj-badge.oj-badge-sm.custom-badge');
  198 |     const productSearchAddBtn = page.locator("button[aria-label='Add']")
  199 |     await productSearchAddBtn.scrollIntoViewIfNeeded()
  200 |     await productSearchAddBtn.waitFor({state:'visible',timeout: 8000});
  201 |     await expect(productSearchAddBtn).toBeVisible({timeout:8000})
  202 |     await expect(isAtpDateVisible).toBeVisible();
  203 |     await expect(isAvailableStockVisible).toBeVisible();
  204 |     await expect(page.locator('wol-stock-quantity.oj-complete')).toHaveCount(1);
  205 | })
  206 |
  207 | // test("Validate Add product to basket section", async ({ page }) => {
  208 | //     await page.locator("input[aria-label='Product Search']").fill("219500")
  209 | //     const productSearchAddBtn = page.getByRole('button', { name: 'Add' })
  210 | //     await productSearchAddBtn.click()
  211 | //     await page.waitForSelector("[class*='oj-listview-item']", { state: 'visible', timeout: 15000 })
  212 | //     const productSelAddToBsktList = page.locator("[class='oj-listview-cell-element']")
  213 | //     await expect(productSelAddToBsktList).toBeVisible()
  214 | //     await expect(productSelAddToBsktList).toHaveScreenshot(["OrderCapture/AddToProductBasketSlotSection", "AddToProductBasketSlotSection.png"])
  215 | // })
  216 |
  217 | test("Validate Add product to basket layout and Validate Auto populate fields", async () => {
  218 |     // await page.locator("input[aria-label='Product Search']").fill("D53216")
  219 |     await page.locator("button[aria-label='Add']").waitFor({ state: 'visible', timeout: 9000 })
  220 |     const productSearchAddBtn = page.locator("button[aria-label='Add']")
  221 |     await productSearchAddBtn.click()
  222 |     await page.waitForSelector("[class*='oj-listview-item']", { state: 'visible', timeout: 15000 })
  223 |     //changes related to Save and Exit 
  224 |     const isMoreActionsAvailable = "button[aria-label='More Actions']"
  225 |     const isMoreActionsMenuAvailable = "div[aria-label='More Actions']"
  226 |     const isSaveBtnAvailable = page.getByText('Save');
  227 |     const isSaveAndExitBtnAvailable = page.getByText('Save and Exit')
  228 |     await expect(page.locator(isMoreActionsAvailable)).toBeVisible({timeout:3000});
  229 |     await page.locator(isMoreActionsAvailable).click();
  230 |     await expect(page.locator(isMoreActionsMenuAvailable)).toBeVisible({timeout:5000})
  231 |     await expect(isSaveBtnAvailable).toBeVisible({timeout:3000})
  232 |     await expect(isSaveAndExitBtnAvailable).toBeVisible({timeout:3000})
  233 |     await page.locator(isMoreActionsAvailable).click();
  234 |     const isCustomerAutoPopulated = await page.locator("oj-sp-scoreboard-metric-card[card-title='Customer'] div.oj-sp-scoreboard-metric-card-metric").textContent();
  235 |     expect(isCustomerAutoPopulated).not.toBeNull();
  236 |     // const isBillToAutoPopulated = await page.locator("oj-sp-scoreboard-metric-card[card-title='Bill to'] div.oj-sp-scoreboard-metric-card-metric").textContent();
  237 |     // expect(isBillToAutoPopulated).not.toBeNull();
  238 |     const isRequiredPopulated = await page.locator("oj-sp-scoreboard-metric-card[card-title='Required'] div.oj-sp-scoreboard-metric-card-metric").textContent();
  239 |     expect(isRequiredPopulated).not.toBeNull();
  240 |     // const isShippingMethodPopulated = await page.locator("oj-sp-scoreboard-metric-card[card-title='Shipping Method'] div.oj-sp-scoreboard-metric-card-metric").textContent();
  241 |     // expect(isShippingMethodPopulated).not.toBeNull();
  242 |     const isClearAllVisible = await page.locator("button[aria-label='Clear All']")
  243 |     expect(isClearAllVisible).toBeVisible()
  244 |     const productSelAddToBsktList = page.locator("[class='oj-listview-cell-element']")
  245 |     await expect(productSelAddToBsktList).toBeVisible()
  246 |     const addToBsktDecreaseBtn = page.locator("div.oj-listview-cell-element button[aria-label='Decrease']")
  247 |     const addToBsktIncreaseBtn = page.locator("div.oj-listview-cell-element button[aria-label='Increase']")
  248 |     const addToBsktDeleteBtn = page.locator("button[aria-label='Delete']")
  249 |     const isSubTotalDisplayed =  page.getByText('Sub Total');
  250 |     const isVATDisplayed =  page.getByText('VAT');
  251 |     const isTotalDisplayed =  page.getByText('Total',{exact: true});
  252 |     await expect(isSubTotalDisplayed).toBeVisible();
  253 |     await expect(isVATDisplayed).toBeVisible();
  254 |     await expect(isTotalDisplayed).toBeVisible();
  255 |     await expect(addToBsktDecreaseBtn).toBeVisible();
  256 |     await expect(addToBsktIncreaseBtn).toBeVisible();
  257 |     await expect(addToBsktDeleteBtn).toBeVisible();
  258 | })
  259 |
  260 | test("Validate Detail Slot (Add Basket Section) in Order Capture Page", async () => {
  261 |     const detailSlotSection = page.locator("oj-vb-fragment-slot[name='detail']")
  262 |     await expect(detailSlotSection).toHaveScreenshot(["OrderCapture/DetailSlotSection", "DetailSlotSectionOnOrderCapturePage.png"])
  263 | })
  264 |
  265 |
  266 | test("Validate Order Dialog pop up with Print and Edit Options", async () => {
  267 |     const customerContentSlotSelection = page.locator("oj-sp-scoreboard-metric-card[card-title='Customer']");
  268 |     const customerSearchInputAvailable = page.locator("input[aria-label='Customer Search']");
  269 |     const selectCustomerListed = page.getByText('7000D54')
  270 |     const customerSearchResultsAvailable = page.locator('oj-c-list-view.customer-list');
  271 |     const clickOnChangeButton =  page.locator('#btnChangeCustomer');
  272 |     const clickOnClearAllBtn = page.locator("button[aria-label='Clear All']");
  273 |     
  274 |     await clickOnClearAllBtn.click();
  275 | //    await customerContentSlotSelection.click();
  276 |     // await page.locator("div[title='Customer Details']").waitFor({timeout: 7000})
  277 |     // if(await clickOnChangeButton.isVisible({timeout: 6000})){
  278 |     //   await clickOnChangeButton.click(); }
  279 |     
  280 |     // await customerSearchInputAvailable.fill('7000D54')
  281 |     // await selectCustomerListed.waitFor({state:'visible', timeout: 6000});
  282 |     // await expect(customerSearchResultsAvailable).toBeVisible({timeout: 20000});
  283 |     // await selectCustomerListed.click();
  284 |     await page.locator("input[aria-label='Product Search']").fill("508201")
  285 |     await page.locator("button[aria-label='Add']").waitFor({ state: 'visible', timeout: 15000 })
  286 |     const productSearchAddBtn = page.locator("button[aria-label='Add']")
  287 |     await productSearchAddBtn.click()
```